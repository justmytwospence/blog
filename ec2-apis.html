<!doctype html>
<html lang="en">
<head>
<title>Scheduling tasks in the cloud with EC2 APIs</title>
<!-- 2016-02-21 Sun 16:14 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Org-mode">
<meta name="author" content="Spencer Boucher">
<link href="/static/images/favicon.ico" rel="icon">
<link rel="stylesheet" href="/static/css/style.min.css" />
<script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
<script src="/static/js/main.min.js"></script>
</head>
<body>
<div id="preamble" class="">
<!-- Static navbar -->
<nav class="navbar navbar-default navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://spencerboucher.com">Spencer Boucher</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li  class="active" ><a href="/">Posts</a></li>
        <li ><a href="/slides.html">Slides</a></li>
        <li ><a href="/about.html">About</a></li>
      </ul>
    </div>
  </div>
</nav>
</div>
<div id="content" class="container">
<div class="row"><div class="col-md-12"><h1 class="title">Scheduling tasks in the cloud with EC2 APIs</h1>
<p>
This post is sort of an addendum to our live mapping project, but it should also
be of use to anyone looking to run an arbitrary script on a recurring
schedule. Originally, we set up a 24/7 instance on Amazon's Elastic Compute
Cloud that ran a daily <code>cron</code> job. This works, but its a bit wasteful because
we're paying for 24 hours of cloud even though we're only actually using it for
maybe 5 minutes a day.
</p>

<p>
Fortunately, Amazon provides a <a href="http://aws.amazon.com/developertools">schmorgesborg</a> of command
line interface (CLI) tools that allow us to manage our cloud instances more
efficiently. Specifically, we want to schedule an instance to spin up only once
a day, execute our script, then shut back down. To accomplish this, we will want
three CLI tools:
</p>

<ul class="org-ul">
<li><a href="http://aws.amazon.com/developertools/368">Amazon EC2 AMI Tools</a>
</li>
<li><a href="http://aws.amazon.com/developertools/351">Amazon EC2 API Tools</a>
</li>
<li><a href="http://aws.amazon.com/developertools/2535">Auto Scaling Command Line Tools</a>
</li>
</ul>

<p>
If you're on a Mac, it's way easier to get these with <a href="https://brew.sh">homebrew</a> than by
downloading from Amazon's website:
</p>

<div class="org-src-container">

<pre class="src src-shell">brew install ec2-ami-tools <span style="color: #373b41;"># </span><span style="color: #969896;">For creating an AMI from an existing machine</span>
brew install ec2-api-tools <span style="color: #373b41;"># </span><span style="color: #969896;">For registering and launching instances</span>
brew install aws-as <span style="color: #373b41;"># </span><span style="color: #969896;">For creating auto scaling groups/defining schedules</span>
</pre>
</div>

<p>
As an extra Homebrew bonus, running <code>brew info ec2-ami-tools</code>, <code>brew info
ec2-api-tools</code>, and <code>brew info aws-as</code> will now tell us exactly what we need to
do to get our authentication and environment variables all set up. First we are
told to download the necessary .pem files from the Amazon console and place them
into a new hidden directory of our home directory <code>.ec2</code>. Then we tell our
command line where everything lives now by inserting the following lines into
our <code>.bashrc</code>:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_PRIVATE_KEY</span>=<span style="color: #b5bd68;">"$(/bin/ls "$HOME"/.ec2/pk-*.pem | /usr/bin/head -1)"</span>
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_CERT</span>=<span style="color: #b5bd68;">"$(/bin/ls "$HOME"/.ec2/cert-*.pem | /usr/bin/head -1)"</span>
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_HOME</span>=<span style="color: #b5bd68;">"/usr/local/Cellar/ec2-api-tools/1.6.12.0/libexec"</span>
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_AMITOOL_HOME</span>=<span style="color: #b5bd68;">"/usr/local/Cellar/ec2-ami-tools/1.4.0.9/libexec"</span>
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_REGION</span>=<span style="color: #b5bd68;">"us-west-2"</span> export <span style="color: #8abeb7;">EC2_ZONE</span>=$<span style="color: #b294bb;">{</span><span style="color: #8abeb7;">EC2_REGION</span><span style="color: #b294bb;">}</span>a
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">EC2_URL</span>=https://$<span style="color: #8abeb7;">EC2_REGION</span>.ec2.amazonaws.com
<span style="color: #8abeb7;">export</span> <span style="color: #8abeb7;">AWS_AUTO_SCALING_URL</span>=https://autoscaling.$<span style="color: #8abeb7;">EC2_REGION</span>.amazonaws.com
</pre>
</div>

<p>
Its pretty simple, but if you have any trouble with this part, refer to the
official <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html">Amazon documentation for setting up the command line</a>.
</p>

<p>
Because these environment variables are recognized out of the box by the CLI
tools, we won't need to point to our authentication keys or specify a region
every time we make an API call and our next commands will be much more
succinct. Note that every EC2 instance is physically located at one of several
regions; we are using us-west-2 because it happens to be where I spun up the
existing instance that currently holds our "update.py" script, but any of them
would probably work just fine for the simple job at hand.
</p>

<table class="table table-striped table-bordered table-hover table-condensed">


<colgroup>
<col  class="left">

<col  class="left">
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Code</th>
<th scope="col" class="left">Region</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">ap-northeast-1</td>
<td class="left">Asia Pacific (Tokyo) Region</td>
</tr>

<tr>
<td class="left">ap-southeast-1</td>
<td class="left">Asia Pacific (Singapore) Region</td>
</tr>

<tr>
<td class="left">ap-southeast-2</td>
<td class="left">Asia Pacific (Sydney) Region</td>
</tr>

<tr>
<td class="left">eu-west-1</td>
<td class="left">EU (Ireland) Region</td>
</tr>

<tr>
<td class="left">sa-east-1</td>
<td class="left">South America (Sao Paulo) Region</td>
</tr>

<tr>
<td class="left">us-east-1</td>
<td class="left">US East (Northern Virginia) Region</td>
</tr>

<tr>
<td class="left">us-west-1</td>
<td class="left">US West (Northern California) Region</td>
</tr>

<tr>
<td class="left">us-west-2</td>
<td class="left">US West (Oregon) Region</td>
</tr>
</tbody>
</table>

<p>
So, first things first. We can't just spin up an off-the-rack EC2 instance every
day, because we'll run into the same problem that I originally had with my web
host: the Python modules that we need won't be installed. We <b>could</b> write a
script that would install `pip` plus all of the requisite Python modules and run
it first thing after we launch the instance, but there's a better way:
</p>

<div class="org-src-container">

<pre class="src src-shell">ec2-create-image i-8918e1be -n <span style="color: #b5bd68;">"Map Update Image"</span>
</pre>
</div>

<p>
This command from `ec2-ami-tools` creates an "Amazon Machine Image" of the
instance that we previously had running and names it "Map Update Image". A new
image ID will now print to your console, `ami-fcdfb9cc` in my case. This is
tantamount to cloning the instance, because we can now reference the new image
ID when we spin up new instances and all of our modules, scripts, etc. will be
there waiting for us. Note that I removed the instance's `cron` job <b>before</b>
creating the AMI, because we'll now be handling the task scheduling from
<b>outside</b> the instance, via <b><b>autoscaling</b></b>.
</p>

<p>
Next let's write a shell script that will execute our Python map-updating
script, shoot us a diagnostic email, then shut down the instance that its
running on. The idea here is that once a day we're going to spin up an instance
using our shiny new AMI and immediately run this new script (let's call it
"update.sh") that will do its business and then promptly commit seppuku and stop
charging us money. Eric Hammond has created a great template on <a href="http://alestic.com/2011/11/ec2-schedule-instance">his blog</a> which
I've modified below. Note the execution of our [familiar]() "update.py" script
highlighted on line 4, and the apoptosis command on line 46:
</p>

<div class="org-src-container">

<pre class="src src-shell"><span style="color: #373b41;">#</span><span style="color: #969896;">!/bin/bash -x exec &gt; &gt;(tee /var/log/user-data.log|logger -t user-data -s 2&gt;/dev/</span><span style="color: #b294bb;">console)</span><span style="color: #969896;"> 2&gt;&amp;1</span>

/usr/bin/python /home/ubuntu/update.py <span style="color: #373b41;"># </span><span style="color: #969896;">Run the script</span>

<span style="color: #8abeb7;">EMAIL</span>=spencer.g.boucher@gmail.com

<span style="color: #373b41;"># </span><span style="color: #969896;">Upgrade and install Postfix so we can send a sample email export</span>
<span style="color: #8abeb7;">DEBIAN_FRONTEND</span>=noninteractive apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get
install -y postfix

<span style="color: #373b41;"># </span><span style="color: #969896;">Get some information about the running instance instance_id=$(wget -qO-</span>
instance-data/latest/meta-data/instance-id<span style="color: #cd5c5c; font-weight: bold;">)</span> <span style="color: #8abeb7;">public_ip</span>=$<span style="color: #cd5c5c; font-weight: bold;">(</span>wget -qO-
instance-data/latest/meta-data/public-ipv4<span style="color: #cd5c5c; font-weight: bold;">)</span> <span style="color: #8abeb7;">zone</span>=$<span style="color: #cd5c5c; font-weight: bold;">(</span>wget -qO-
instance-data/latest/meta-data/placement/availability-zone<span style="color: #cd5c5c; font-weight: bold;">)</span> <span style="color: #8abeb7;">region</span>=$<span style="color: #cd5c5c; font-weight: bold;">(</span>expr match
$<span style="color: #8abeb7;">zone</span> <span style="color: #b5bd68;">'\(.*\).'</span><span style="color: #cd5c5c; font-weight: bold;">)</span>  <span style="color: #8abeb7;">uptime</span>=$<span style="color: #cd5c5c; font-weight: bold;">(</span>uptime<span style="color: #cd5c5c; font-weight: bold;">)</span>

<span style="color: #373b41;"># </span><span style="color: #969896;">Send status email /usr/sbin/sendmail -oi -t -f $EMAIL &lt;&lt;EOM From: $EMAIL To:</span>
$<span style="color: #8abeb7;">EMAIL</span> Subject: Results of EC2 scheduled script

This email message was generated on the following EC2 instance:

  instance id: $<span style="color: #8abeb7;">instance_id</span> region: $<span style="color: #8abeb7;">region</span> public ip: $<span style="color: #8abeb7;">public_ip</span> uptime:
  $<span style="color: #8abeb7;">uptime</span>

If the instance is still running, you can monitor the output of this job using a
command like:

  ssh ubuntu@$<span style="color: #8abeb7;">public_ip</span> tail -1000f /var/log/user-data.log

  ec2-describe-instances --region $<span style="color: #8abeb7;">region</span> $<span style="color: #8abeb7;">instance_id</span>

EOM

<span style="color: #373b41;"># </span><span style="color: #969896;">Give the script and email some time to do their thing sleep 600 # 10 minutes</span>

<span style="color: #373b41;"># </span><span style="color: #969896;">This will stop the EBS boot instance, stopping the hourly charges.  # Have</span>
Auto Scaling terminate it, stopping the storage charges.  <span style="color: #373b41;"># </span><span style="color: #969896;">shutdown -h now</span>

<span style="color: #b294bb;">exit</span> 0
</pre>
</div>

<p>
Note that the user data script that we pass to the launch configuration executes
with <b>root</b> permissions, not as the user "ubuntu" that you would typically log
in as via `ssh`. Its probably best to be as explicit as possible when specifying
path names in the cloud, the tilde operator might turn around and bite you.
</p>

<p>
Now we need to create <b>launch configuration</b> that will basically do all the
button-pushing that we would normally be doing at the AWS console GUI.
</p>

<p>
Here we specify:
</p>

<ul class="org-ul">
<li>"Micro" as our instance type.
</li>
<li>Our shell script "update.sh" from step 2 as the "user-data-file". User data
files are passed into the instance and executed immediately when supplied in
the launch configuration. They must be less than 16kb as I suppose they are
stored on some ancillary server somewhere.
</li>
<li>The AMI image that we cloned in step 1 from the instance that included our
Python modules.
</li>
<li>The name of the launch config; let's call it "map-update-launch-config".
</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell">as-create-launch-config <span style="color: #b5bd68;">\</span>
    --instance-type t1.micro <span style="color: #b5bd68;">\</span>
    --user-data-file ~/Desktop/update.sh <span style="color: #b5bd68;">\</span>
    --image-id ami-fcdfb9cc <span style="color: #b5bd68;">\</span>
    --launch-config <span style="color: #b5bd68;">"map-update-launch-config"</span>
as-describe-launch-configs --headers
</pre>
</div>

<p>
Note that the second line provides a list of all the launch configurations that
have been created.
</p>

<p>
We must also create an <b>auto scaling group</b>. These are typically used as a
sort of container to which we can add/remove instances on a schedule or in
response to heavy traffic, but we can also use it to schedule a single instance
to flick on and off. We need to tell it:
</p>

<ul class="org-ul">
<li>A name to assign the scaling group ("map-update-scale-group").
</li>
<li>The name of the launch configuration we created in step 3
("map-update-launch-config").
</li>
<li>Which availability zone we want to use (basically irrelevant; we set our
environment variable <code>EC2_ZONE</code> to "a"
earlier). <code>ec2-describe-available-zones</code> provides a list of the available
zones
</li>
<li>A minimum and maximum number of instances in the group. We'll initialize these
to zero.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell">as-create-auto-scaling-group <span style="color: #b5bd68;">\</span>
    --auto-scaling-group <span style="color: #b5bd68;">"map-update-scale-group"</span> <span style="color: #b5bd68;">\</span>
    --launch-configuration <span style="color: #b5bd68;">"map-update-launch-config"</span> <span style="color: #b5bd68;">\</span>
    --availability-zones <span style="color: #b5bd68;">"$EC2_ZONE"</span> <span style="color: #b5bd68;">\</span>
    --min-size 0 <span style="color: #b5bd68;">\</span>
    --max-size 0
as-suspend-processes <span style="color: #b5bd68;">"map-update-scale-group"</span> --processes ReplaceUnhealthy
as-describe-auto-scaling-groups --headers
</pre>
</div>

<p>
In the second line, we are using <code>as-suspend-processes</code> to prevent the
instance's default behavior which is to attempt to restart after it is shut
down. The third line provides a list of all the auto scaling groups that have
been created.
</p>

<p>
Last but not least, we are ready to assign a schedule to our auto scaling
group. Here we create two: one to start the instance and one to terminate the
instance. Astute readers will recall that "update.sh" already <b>stops</b> the
instance so that we aren't paying to have it running, but we also need to
completely <b>terminate</b> the instance so that we aren't paying to store
information about it. Each schedule requires:
</p>

<ul class="org-ul">
<li>A name (~"map-update-start"~ &amp; ~"map-update-stop"~).
</li>
<li>The name of the auto scaling group we created in step 4
("map-update-scale-group").
</li>
<li>How we want to scale. By setting both <code>min-size</code> and <code>max-size</code> to 1, we are
effectively turning on one instance. We later effectively turn that instance
back off by setting both to 0.
</li>
<li>A "recurrence," ie when to occur. This flag uses the same syntax that <code>cron</code>
does. Here we set the instance to launch at midnight UTC (<code>0 0 * * *</code>), and
terminate 15 minutes later (<code>15 0 * * *</code>). Recall that our script already
stops the instance 10 minutes after execution, so 15 minutes is playing it
safe.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell">as-put-scheduled-update-group-action <span style="color: #b5bd68;">\</span>
    --name <span style="color: #b5bd68;">"map-update-start"</span> <span style="color: #b5bd68;">\</span>
    --auto-scaling-group <span style="color: #b5bd68;">"map-update-scale-group"</span> <span style="color: #b5bd68;">\</span>
    --min-size 1 <span style="color: #b5bd68;">\</span>
    --max-size 1 <span style="color: #b5bd68;">\</span>
    --recurrence <span style="color: #b5bd68;">"0 0 * * *"</span>
as-put-scheduled-update-group-action <span style="color: #b5bd68;">\</span>
    --name <span style="color: #b5bd68;">"map-update-stop"</span> <span style="color: #b5bd68;">\</span>
    --auto-scaling-group <span style="color: #b5bd68;">"map-update-scale-group"</span> <span style="color: #b5bd68;">\</span>
    --min-size 0 <span style="color: #b5bd68;">\</span>
    --max-size 0 <span style="color: #b5bd68;">\</span>
    --recurrence <span style="color: #b5bd68;">"15 0 * * *"</span>
as-describe-scheduled-actions --headers
</pre>
</div>

<p>
As before, the third line provides a list of the actions that have been
scheduled.
</p>

<p>
And thats it! We are now only paying for 10 or 15 minutes of cloud per day, as
opposed to 1,440 of them. To review the timeline we have created in this
example: our auto scaling group boots up an instance up at midnight UTC that
immediately executes "update.sh". This automatically executes "update.py" and
shoots us a diagnostic email. It then waits 10 minutes to make sure everything
has time to run, before stopping the instance. 5 minutes after <b>that</b> the auto
scaling group then completely terminates the instance.
</p>

<p>
Other great resources:
</p>

<ul class="org-ul">
<li><a href="http://www.cardinalpath.com/autoscaling-your-website-with-amazon-web-services-part-2">Auto Scaling Your Website with Amazon Web Services</a>
</li>
<li><a href="http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/WhatIsAutoScaling.html">Official Amazon documentation for scheduling auto scaling groups</a>
</li>
<li><a href="http://alestic.com/2011/11/ec2-schedule-instance">Running EC2 Instances on a Recurring Schedule with Auto Scaling</a>
</li>
<li><a href="http://www.robertsindall.co.uk/blog/how-to-use-amazons-auto-scaling-groups">Summary of API commands</a>
</li>
</ul>
</div></div></div>
<footer id="postamble" class="">


  <div class="container">

    <div class="post-footer">
      <img src="/static/images/avatar.png" alt="Spencer Boucher" class="avatar img-rounded">
      <p>Spencer is a data scientist living in San Francisco</p>
      <p>The source code for this post can be found on GitHub, <a href="http://github.com/justmytwospence/blog/tree/master/posts/ec2-apis.html">here</a></p>
    </div>

    <ul class="rrssb-buttons">

      <li class="rrssb-email">
        <a href="mailto:?subject=Scheduling%20tasks%20in%20the%20cloud%20with%20EC2%20APIs&amp;body=http://spencerboucher.com/ec2-apis.html"><span class="rrssb-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
            <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path>
          </svg>
        </span>
        <span class="rrssb-text">email</span>
        </a>
      </li>

      <li class="rrssb-reddit">
        <a href="http://www.reddit.com/submit?url=http://spencerboucher.com/ec2-apis.html&amp;title=Scheduling tasks in the cloud with EC2 APIs">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
              <path d="M11.794 15.316c0-1.03-.835-1.895-1.866-1.895-1.03 0-1.893.866-1.893 1.896s.863 1.9 1.9 1.9c1.023-.016 1.865-.916 1.865-1.9zM18.1 13.422c-1.03 0-1.895.864-1.895 1.895 0 1 .9 1.9 1.9 1.865 1.03 0 1.87-.836 1.87-1.865-.006-1.017-.875-1.917-1.875-1.895zM17.527 19.79c-.678.68-1.826 1.007-3.514 1.007h-.03c-1.686 0-2.834-.328-3.51-1.005-.264-.265-.693-.265-.958 0-.264.265-.264.7 0 1 .943.9 2.4 1.4 4.5 1.402.005 0 0 0 0 0 .005 0 0 0 0 0 2.066 0 3.527-.46 4.47-1.402.265-.264.265-.693.002-.958-.267-.334-.688-.334-.988-.043z"></path>
              <path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237-.792 0-1.517.287-2.08.76-2.04-1.294-4.647-2.068-7.44-2.218l1.484-4.69 4.062.955c.07 1.4 1.3 2.6 2.7 2.555 1.488 0 2.695-1.208 2.695-2.695C25.88 3.2 24.7 2 23.2 2c-1.06 0-1.98.616-2.42 1.508l-4.633-1.09c-.344-.082-.693.117-.803.454l-1.793 5.7C10.55 8.6 7.7 9.4 5.6 10.75c-.594-.45-1.3-.75-2.1-.72-1.785 0-3.237 1.45-3.237 3.2 0 1.1.6 2.1 1.4 2.69-.04.27-.06.55-.06.83 0 2.3 1.3 4.4 3.7 5.9 2.298 1.5 5.3 2.3 8.6 2.325 3.227 0 6.27-.825 8.57-2.325 2.387-1.56 3.7-3.66 3.7-5.917 0-.26-.016-.514-.05-.768.965-.465 1.577-1.565 1.577-2.698zm-4.52-9.912c.74 0 1.3.6 1.3 1.3 0 .738-.6 1.34-1.34 1.34s-1.343-.602-1.343-1.34c.04-.655.596-1.255 1.396-1.3zM1.646 13.3c0-1.038.845-1.882 1.883-1.882.31 0 .6.1.9.21-1.05.867-1.813 1.86-2.26 2.9-.338-.328-.57-.728-.57-1.26zm20.126 8.27c-2.082 1.357-4.863 2.105-7.83 2.105-2.968 0-5.748-.748-7.83-2.105-1.99-1.3-3.087-3-3.087-4.782 0-1.784 1.097-3.484 3.088-4.784 2.08-1.358 4.86-2.106 7.828-2.106 2.967 0 5.7.7 7.8 2.106 1.99 1.3 3.1 3 3.1 4.784C24.86 18.6 23.8 20.3 21.8 21.57zm4.014-6.97c-.432-1.084-1.19-2.095-2.244-2.977.273-.156.59-.245.928-.245 1.036 0 1.9.8 1.9 1.9-.016.522-.27 1.022-.57 1.327z"></path>
            </svg>
          </span>
          <span class="rrssb-text">reddit</span>
        </a>
      </li>

      <li class="rrssb-twitter">
        <a href="https://twitter.com/intent/tweet?text=Scheduling%20tasks%20in%20the%20cloud%20with%20EC2%20APIs:%20http://spencerboucher.com/ec2-apis.html" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
              <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z"></path>
            </svg>
          </span>
          <span class="rrssb-text">twitter</span>
        </a>
      </li>

      <li class="rrssb-facebook">
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://spencerboucher.com/ec2-apis.html" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 29 29">
              <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"></path>
            </svg>
          </span>
          <span class="rrssb-text">facebook</span>
        </a>
      </li>

      <li class="rrssb-linkedin">
        <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://spencerboucher.com/ec2-apis.html&amp;title=Scheduling%20tasks%20in%20the%20cloud%20with%20EC2%20APIs" class="popup">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 28 28">
              <path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path>
            </svg>
          </span>
          <span class="rrssb-text">linkedin</span>
        </a>
      </li>

      <li class="rrssb-hackernews">
        <a href="https://news.ycombinator.com/submitlink?u=http://spencerboucher.com/ec2-apis.html&amp;t=Scheduling%20tasks%20in%20the%20cloud%20with%20EC2%20APIs">
          <span class="rrssb-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewbox="0 0 28 28">
              <path fill="#FFF" d="M14 13.626l-4.508-9.19H6.588l6.165 12.208v6.92h2.51v-6.92l6.15-12.21H18.69"></path>
            </svg>
          </span>
          <span class="rrssb-text">hackernews</span>
        </a>
      </li>

      <li class="rrssb-pocket">
        <a href="https://getpocket.com/save?url=http://spencerboucher.com/ec2-apis.html">
          <span class="rrssb-icon">
            <svg width="32" height="28" viewbox="0 0 32 28" xmlns="http://www.w3.org/2000/svg">
              <path d="M28.782.002c2.03.002 3.193 1.12 3.182 3.106-.022 3.57.17 7.16-.158 10.7-1.09 11.773-14.588 18.092-24.6 11.573C2.72 22.458.197 18.313.057 12.937c-.09-3.36-.05-6.72-.026-10.08C.04 1.113 1.212.016 3.02.008 7.347-.006 11.678.004 16.006.002c4.258 0 8.518-.004 12.776 0zM8.65 7.856c-1.262.135-1.99.57-2.357 1.476-.392.965-.115 1.81.606 2.496 2.453 2.334 4.91 4.664 7.398 6.966 1.086 1.003 2.237.99 3.314-.013 2.407-2.23 4.795-4.482 7.17-6.747 1.203-1.148 1.32-2.468.365-3.426-1.01-1.014-2.302-.933-3.558.245-1.596 1.497-3.222 2.965-4.75 4.526-.706.715-1.12.627-1.783-.034-1.597-1.596-3.25-3.138-4.93-4.644-.47-.42-1.123-.647-1.478-.844z"></path>
            </svg>
          </span>
          <span class="rrssb-text">pocket</span>
        </a>
      </li>

    </ul>

    <div id="disqus_thread"></div>
    <script>
     (function() {
       var d = document, s = d.createElement('script');
       s.src = '//spencerboucher.disqus.com/embed.js';
       s.setAttribute('data-timestamp', +new Date());
       (d.head || d.body).appendChild(s);
     })();
    </script>
    <noscript>
      Please enable JavaScript to view the comments.
    </noscript>
  </div>

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 ga('create', 'UA-45101202-1', 'auto');
 ga('send', 'pageview');
</script>
</footer>
</body>
</html>
